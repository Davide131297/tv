# Migration zu Supabase - Übersicht

## 1. Supabase Tabellen-Schema

Die Anwendung erwartet dieses Schema:

```sql
create table public.tv_show_politicians (
  id serial not null,
  show_name text not null,
  episode_date date not null,
  politician_name text not null,
  party_name text null,
  politician_id integer null,
  party_id integer null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  abgeordnetenwatch_url text null,
  tv_channel public.tv_channel null,
  constraint tv_show_politicians_pkey primary key (id),
  constraint tv_show_politicians_show_name_episode_date_politician_id_key unique (show_name, episode_date, politician_id)
) TABLESPACE pg_default;
```

```sql
create table public.tv_show_episode_political_areas (
  id bigint generated by default as identity not null,
  show_name text null,
  episode_date date null,
  political_area_id smallint null,
  created_at timestamp with time zone not null default now(),
  tv_channel public.tv_channel null,
  constraint tv_show_episode_political_areas_pkey primary key (id),
  constraint unique_show_episode_political_area unique (show_name, episode_date, political_area_id),
  constraint fk_political_area foreign KEY (political_area_id) references political_area (id)
) TABLESPACE pg_default;
```

```sql
create table public.show_links (
  id bigint generated by default as identity not null,
  show_name text null,
  episode_url text null,
  episode_date date null,
  constraint show_linka_pkey primary key (id),
  constraint unique_show_episode_link unique (show_name, episode_date)
) TABLESPACE pg_default;
```

### 2. API

#### Politics API (`/api/politics`)

- `GET /api/politics?type=party-stats` - Partei-Statistiken
- `GET /api/politics?type=episodes` - Episoden mit Politiker-Anzahl
- `GET /api/politics?type=recent` - Letzte Auftritte
- `GET /api/politics?type=summary` - Gesamt-Statistiken
- `GET /api/politics?type=detailed-appearances` - Detaillierte Auftritte
- `GET /api/politics?type=shows` - Liste der Shows

#### Crawler APIs

- `POST /api/crawl/maischberger` - Maischberger Crawler
- `POST /api/crawl/lanz` - Lanz Crawler
- `POST /api/crawl/illner` - Illner Crawler
- `POST /api/crawl/miosga` - Miosga Crawler
- `DELETE /api/crawl/maischberger` - Lösche Maischberger Daten
